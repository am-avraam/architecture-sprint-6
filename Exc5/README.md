# Подробное описание решения GraphQL API

## Анализ исходной ситуации

В текущей реализации REST API сервиса client-info существует проблема избыточных запросов. При необходимости получить данные клиента, его документы и информацию о родственниках требуется выполнить три отдельных HTTP-запроса:
- GET /clients/{id}
- GET /clients/{id}/documents
- GET /clients/{id}/relatives

Это создает дополнительную нагрузку на сеть и увеличивает время ответа.

## Решение с использованием GraphQL

### 1. Структура схемы

Схема GraphQL организована вокруг трех основных типов:
- `Client` - основная сущность, содержащая базовую информацию о клиенте
- `Document` - документы клиента
- `Relative` - информация о родственниках

### 2. Особенности реализации

#### Тип Client
```graphql
type Client {
    id: ID!
    name: String!
    age: Int
    documents: [Document!]
    relatives: [Relative!]
}
```
- Добавлены связи с документами и родственниками
- Обязательные поля помечены восклицательным знаком
- Использован специальный тип ID для идентификаторов

#### Тип Document
```graphql
type Document {
    id: ID!
    type: String!
    number: String!
    issueDate: String
    expiryDate: String
}
```
- Структура соответствует REST API
- Даты представлены как String для гибкости формата

#### Тип Relative
```graphql
type Relative {
    id: ID!
    relationType: String!
    name: String!
    age: Int
}
```
- Сохранены все поля из REST API
- Возраст опционален (тип Int без !)

### 3. Примеры использования

#### Базовый запрос
```graphql
query {
  client(id: "123") {
    name
    age
  }
}
```

#### Запрос с вложенными данными
```graphql
query {
  client(id: "123") {
    name
    documents {
      type
      number
    }
    relatives {
      name
      relationType
    }
  }
}
```

### 4. Преимущества решения

1. **Оптимизация запросов**
   - Все данные получаются за один запрос
   - Клиент запрашивает только нужные поля

2. **Гибкость**
   - Легко добавлять новые поля
   - Можно комбинировать данные как угодно

3. **Производительность**
   - Меньше HTTP-запросов
   - Меньший объем передаваемых данных

4. **Документация**
   - Схема самодокументируема
   - Описания типов и полей встроены в схему

### 5. Возможные улучшения

1. Добавление пагинации для списков документов и родственников
2. Использование более точных типов для дат
3. Добавление мутаций для изменения данных
4. Реализация кэширования на уровне полей
